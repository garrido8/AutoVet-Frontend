
<div class="main-content">

  @if ( !isAdmin ) {
    <h1>Mis incidencias</h1>

    @if( workerAppoinments.length > 0 ) {
      <div class="cards-div">
        @for (appoinment of workerAppoinments; track $index) {
          <div class="card"  routerLink="/staff/appointment-info/{{ appoinment.pk }}">
            <div class="card-header">
              <h3>{{ appoinment.titulo }}</h3>
              <p class="description">{{ appoinment.descripcion }}</p>
            </div>
            <div class="card-body">
              <p>Estado: {{ getDisplayStatus( appoinment.estado )}}</p>
            </div>
          </div>
        }
      </div>
    } @else {
      <p class="no-appointments">No tienes incidencias registradas.</p>
    }

    <hr>
  }


  @if( isAdmin ) {
    <h1>Incidencias</h1>
  } @else {
    <h2>Incidencias</h2>
  }

  @if( allAppoinments.length > 0 ) {
    <div class="cards-div">
      @for (appoinment of allAppoinments; track $index) {
        <div class="card">
          <div class="card-header">
            <h3>{{ appoinment.titulo }}</h3>
            <p class="description">{{ appoinment.descripcion }}</p>
          </div>
          <div class="card-body status">
            <p>Estado: {{ getDisplayStatus( appoinment.estado )}}</p>
          </div>

          @if( !isAdmin ) {
            <div class="assign-btn-container">
              <button (click)="assignAppoinment(appoinment)" class="assign-btn">
                Asignar
              </button>
            </div>
          } @else {
            <div class="assigned-worker">
              <p>Asignado a: {{ appoinment.workerName }}</p>
            </div>
          }
        </div>
      }
    </div>
  } @else {
    <p class="no-appointments">No hay incidencias registradas.</p>
  }
</div>
